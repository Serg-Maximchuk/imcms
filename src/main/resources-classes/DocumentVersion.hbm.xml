<?xml version="1.0" encoding="UTF-8"?>
 
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" 
    "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
 
<hibernate-mapping>
  <!--
  <query name="">
    <![CDATA[
    ]]>
  </query>    
  -->
  
  <!-- Collection -->
  <query name="DocumentVersion.getByDocumentIdAndVersionTag">
    <![CDATA[
      SELECT v FROM DocumentVersion v 
      WHERE 
        v.documentId = :documentId AND 
        v.versionTag = :versionTag    
    ]]>
  </query>   
  
  <!-- Unique -->
  <query name="DocumentVersion.getLastVersion">
    <![CDATA[
	  SELECT v FROM DocumentVersion v 
	  WHERE v.id IN (
	    SELECT max(v.id) FROM DocumentVersion v 
	    WHERE v.documentId = :documentId)
	  )    
    ]]>
  </query>  
  
  <!-- Unique -->
  <query name="DocumentVersion.getByDocumentIdAndVersion">
    <![CDATA[
	  SELECT v FROM DocumentVersion v 
	  WHERE 
	    v.documentId = :documentId AND
		v.version    = :version    
    ]]>
  </query>  

  <!-- Collection -->
  <query name="DocumentVersion.getByDocumentId">
    <![CDATA[
      SELECT v FROM DocumentVersion v WHERE v.documentId = :documentId   
    ]]>
  </query>
</hibernate-mapping>